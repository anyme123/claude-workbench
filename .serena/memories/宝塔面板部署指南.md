# droid2api 宝塔面板部署指南

## 项目信息
- **类型**: Node.js 项目 (ES模块)
- **主文件**: server.js
- **默认端口**: 3000
- **依赖**: express, node-fetch
- **启动命令**: npm start 或 node server.js

## 宝塔面板部署步骤

### 1. 环境准备
在宝塔面板安装以下软件：
- Node.js (18.0+ 推荐)
- PM2管理器

### 2. 项目上传
- 方式1：使用宝塔文件管理器上传压缩包并解压
- 方式2：使用SSH连接，通过git clone
- 方式3：直接在宝塔终端创建项目目录

### 3. 安装依赖
在项目目录执行：npm install

### 4. 配置认证
在宝塔环境变量或项目配置中设置：
- FACTORY_API_KEY (固定密钥，最高优先级)
- 或 DROID_REFRESH_KEY (自动刷新令牌)
- 或使用客户端授权（无需配置）

### 5. 配置PM2启动
在宝塔PM2管理器添加项目：
- 项目名称：droid2api
- 启动文件：server.js
- 运行目录：项目根目录
- 启动命令：node server.js

### 6. 反向代理设置
如需域名访问，在宝塔网站管理创建反向代理：
- 目标URL：http://127.0.0.1:3000
- 配置HTTPS证书（可选）

### 7. 防火墙配置
在宝塔安全面板放行端口3000（如不使用反向代理）

## 关键配置文件
- config.json：端口、模型、推理级别配置
- package.json：项目依赖和启动脚本

## 监控和维护
- 通过PM2管理器查看运行状态
- 查看日志排查问题
- 支持自动重启和集群模式
